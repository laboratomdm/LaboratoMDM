<Window x:Class="LaboratoMDM.UI.Operator.Views.AgentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LaboratoMDM.UI.Operator.Views"
        mc:Ignorable="d"
        Title="AgentWindow" Height="600" Width="1000">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Master: List of Agents -->
        <ListBox Grid.Column="0" ItemsSource="{Binding Agents}" SelectedItem="{Binding SelectedAgent, Mode=TwoWay}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="4">
                        <TextBlock Text="{Binding HostName}" FontWeight="Bold"/>
                        <TextBlock Text="{Binding IpAddress}"/>
                        <TextBlock Text="{Binding LastHeartbeat, StringFormat='Last heartbeat: {0:G}'}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!-- Detail: Agent Info -->
        <TabControl Grid.Column="1" Margin="8" DataContext="{Binding SelectedAgentDetail}">
            <TabItem Header="Overview">
                <StackPanel Margin="8">
                    <TextBlock Text="{Binding AgentId}"/>
                    <TextBlock Text="{Binding HostName}"/>
                    <TextBlock Text="{Binding IpAddress}"/>
                    <TextBlock Text="{Binding IsOnline}"/>
                    <TextBlock Text="{Binding LastHeartbeat}"/>
                    <TextBlock Text="{Binding Manufacturer}"/>
                    <TextBlock Text="{Binding Model}"/>
                    <TextBlock Text="{Binding FirmwareVersion}"/>
                </StackPanel>
            </TabItem>

            <TabItem Header="System Info">
                <StackPanel Margin="8">
                    <TextBlock Text="{Binding Cpu}"/>
                    <TextBlock Text="{Binding RamGb, StringFormat='RAM: {0} GB'}"/>
                    <TextBlock Text="{Binding OsVersion}"/>
                    <TextBlock Text="{Binding HostnameFull}"/>
                    <TextBlock Text="Disks:" FontWeight="Bold"/>
                    <ItemsControl ItemsSource="{Binding Disks}"/>
                    <TextBlock Text="GPU:" FontWeight="Bold"/>
                    <ItemsControl ItemsSource="{Binding Gpus}"/>
                    <TextBlock Text="IP Addresses:" FontWeight="Bold"/>
                    <ItemsControl ItemsSource="{Binding IpAddresses}"/>
                    <TextBlock Text="MAC Addresses:" FontWeight="Bold"/>
                    <ItemsControl ItemsSource="{Binding MacAddresses}"/>
                    <TextBlock Text="{Binding Motherboard}"/>
                </StackPanel>
            </TabItem>

            <TabItem Header="Users">
                <Grid Margin="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock
                        Text="{Binding Users.Error}"
                        Foreground="Red"/>

                    <!-- Users list -->
                    <DataGrid
                        Grid.Row="1"
                        ItemsSource="{Binding Users.Users}"
                        AutoGenerateColumns="False"
                        IsReadOnly="True">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}"/>
                            <DataGridTextColumn Header="SID" Binding="{Binding Sid}"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding AccountType}"/>
                            <!--<DataGridCheckBoxColumn Header="Enabled" Binding="{Binding IsEnabled}"/>-->
                            <DataGridTextColumn Header="Last Logon"
                                    Binding="{Binding LastLogon, StringFormat={}{0:G}}"/>
                            <DataGridTextColumn Header="Groups"
                                    Binding="{Binding Groups}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</Window>
